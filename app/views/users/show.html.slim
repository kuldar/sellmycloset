.bar.is-red
	div Products #{ @user.products.count }
	div Sales #{ @user.products.sold.count }
	div Current balance #{ number_to_currency @user.payment_balance }
	div Total earnings #{ number_to_currency @user.lifetime_balance }

.grid#grid.is-loading
	.grid-item = render 'shared/user_card', user: @user
	- unless signed_in?
		.grid-item = render 'shared/signup_cta'
	- @user.products.each do |product|
		.grid-item = render 'products/feed_product', product: product

javascript:
	$('#grid').imagesLoaded( function() {

		function getWindowWidth() {
      return Math.max(document.documentElement.clientWidth, window.innerWidth || 0)
    }
		
		$('#grid').wookmark({
		  itemWidth: function () {
        return getWindowWidth() < 480 ? 300 : 360;
      },
		  offset: 0,
		  flexibleWidth: function () {
        return getWindowWidth() < 480 ? '100%' : 480;
      }
		});

		$('#grid').removeClass('is-loading');
	});