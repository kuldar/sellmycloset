.header-row
	.search
		= form_for products_path, html: { class: 'search-form' } do |f|
			= f.select :tag_list, options_for_select(options_for_tags), {}, { class: 'search-input', multiple: true, data: { behavior: 'search' }}

.grid#grid.is-loading
	- unless signed_in?
		.grid-item
			= render 'shared/signup_cta'
	- @products.each do |product|
		.grid-item
			= render 'products/feed_product', product: product

javascript:
	$('#grid').imagesLoaded( function() {

		function getWindowWidth() {
      return Math.max(document.documentElement.clientWidth, window.innerWidth || 0)
    }
		
		$('#grid').wookmark({
		  itemWidth: function () {
        return getWindowWidth() < 480 ? 300 : 360;
      },
		  offset: 0,
		  flexibleWidth: function () {
        return getWindowWidth() < 480 ? '100%' : 480;
      }
		});

		$('#grid').removeClass('is-loading');
	});

	$(document).ready(function () {
		$("[data-behavior='search']").select2({
			placeholder: 'Otsi tooteid hashtagi jÃ¤rgi..' 
		});
	});